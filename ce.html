<!DOCTYPE html>
<html lang="en" style="background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%); min-height: 100vh;"></html>
<head>
    <meta charset="UTF-8">
    <title>Hotel Booking System</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        .container { max-width: 600px; margin: auto; }
        h2 { color: #333; }
        form, .bookings { background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        label { display: block; margin-top: 10px; }
        input, select { width: 100%; padding: 8px; margin-top: 5px; }
        button { margin-top: 15px; padding: 10px 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #eee; }
        .cancel-btn { color: #fff; background: #d9534f; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Hotel Room Booking</h2>
        <form id="bookingForm">
            <label for="guestName">Name:</label>
            <input type="text" id="guestName" name="guestName" required>

            <label for="contactNumber">Contact Number:</label>
            <input type="text" id="contactNumber" name="contactNumber" required pattern="\d{10,15}" title="Enter a valid contact number">

            <label for="roomType">Room Type:</label>
            <select id="roomType" name="roomType" required>
                <option value="">Select Room Type</option>
                <option value="Standard">Standard</option>
                <option value="Deluxe">Deluxe</option>
                <option value="Suite">Suite</option>
            </select>

            <label for="checkInDate">Check-in Date:</label>
            <input type="date" id="checkInDate" name="checkInDate" required min="<?= new Date().toISOString().split('T')[0] ?>">

            <button type="submit">Book Room</button>
        </form>

        <div id="confirmation" style="display:none; background:#dff0d8; padding:15px; border-radius:8px; margin-bottom:20px;"></div>

        <div class="bookings">
            <h2>All Bookings (Reception/Admin View)</h2>
            <table id="bookingsTable">
                <thead>
                    <tr>
                        <th>Booking ID</th>
                        <th>Name</th>
                        <th>Contact</th>
                        <th>Room Type</th>
                        <th>Check-in Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Bookings will appear here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Utility to generate unique Booking ID
        function generateBookingID() {
            return 'BKG' + Date.now() + Math.floor(Math.random() * 1000);
        }

        // Load bookings from localStorage
        function loadBookings() {
            return JSON.parse(localStorage.getItem('hotelBookings') || '[]');
        }

        // Save bookings to localStorage
        function saveBookings(bookings) {
            localStorage.setItem('hotelBookings', JSON.stringify(bookings));
        }

        // Render bookings table
        function renderBookings() {
            const bookings = loadBookings();
            const tbody = document.querySelector('#bookingsTable tbody');
            tbody.innerHTML = '';
            bookings.forEach((booking, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${booking.id}</td>
                    <td>${booking.name}</td>
                    <td>${booking.contact}</td>
                    <td>${booking.roomType}</td>
                    <td>${booking.checkInDate}</td>
                    <td><button class="cancel-btn" data-idx="${idx}">Cancel</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Handle booking form submission
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('guestName').value.trim();
            const contact = document.getElementById('contactNumber').value.trim();
            const roomType = document.getElementById('roomType').value;
            const checkInDate = document.getElementById('checkInDate').value;

            const bookingID = generateBookingID();
            const booking = {
                id: bookingID,
                name,
                contact,
                roomType,
                checkInDate
            };

            const bookings = loadBookings();
            bookings.push(booking);
            saveBookings(bookings);

            document.getElementById('confirmation').style.display = 'block';
            document.getElementById('confirmation').innerHTML = `
                <strong>Booking Confirmed!</strong><br>
                Booking ID: <b>${bookingID}</b><br>
                Name: ${name}<br>
                Room Type: ${roomType}<br>
                Check-in Date: ${checkInDate}
            `;

            this.reset();
            renderBookings();
        });

        // Handle cancel booking
        document.querySelector('#bookingsTable').addEventListener('click', function(e) {
            if (e.target.classList.contains('cancel-btn')) {
                const idx = e.target.getAttribute('data-idx');
                const bookings = loadBookings();
                if (confirm('Are you sure you want to cancel this booking?')) {
                    bookings.splice(idx, 1);
                    saveBookings(bookings);
                    renderBookings();
                }
            }
        });

        // Set min date for check-in
        document.getElementById('checkInDate').min = new Date().toISOString().split('T')[0];

        // Initial render
        renderBookings();
    </script>
</body>
</html></table></div></select></form>